{# Fragmento para mostrar errores de formulario en Studer - Solo errores por campo sin contenedor general #}
{% if form.errors %}
  {# Script para mostrar errores individuales por campo #}
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    const fieldErrors = {
      {% for field in form %}
        {% if field.errors %}
          '{{ field.name }}': [{% for error in field.errors %}'{{ error|escapejs }}'{% if not forloop.last %},{% endif %}{% endfor %}],
        {% endif %}
      {% endfor %}
    };
    
    // Mostrar errores para cada campo especÃ­fico
    Object.keys(fieldErrors).forEach(fieldName => {
      const input = document.querySelector(`[name="${fieldName}"]`);
      if (input) {
        applyFieldError(input, fieldErrors[fieldName]);
      }
    });
    
    function applyFieldError(input, errors) {
      // Verificar si ya existe un mensaje de error para evitar duplicados
      const formGroup = input.closest('.form-group');
      const existingError = formGroup.querySelector('.field-error-message-premium');
      if (existingError) {
        existingError.remove();
      }
      
      // Aplicar estilos de error al input
      input.style.borderColor = '#ef4444';
      input.style.boxShadow = '0 0 0 3px rgba(239, 68, 68, 0.15)';
      input.style.background = 'linear-gradient(135deg, #fef2f2 0%, rgba(255,255,255,0.95) 100%)';
      
      // Crear mensaje de error debajo del campo
      if (formGroup && errors.length > 0) {
        const errorDiv = document.createElement('div');
        errorDiv.className = 'field-error-message-premium';
        errorDiv.style.cssText = `
          margin-top: 0.5rem;
          padding: 0.75rem;
          background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
          border: 1px solid #ef4444;
          border-radius: 0.5rem;
          color: #991b1b;
          font-size: 0.875rem;
          font-weight: 500;
          display: flex;
          align-items: flex-start;
          gap: 0.5rem;
          animation: slideDown 0.3s ease-out;
        `;
        
        errorDiv.innerHTML = `
          <i class="fas fa-exclamation-circle" style="color: #dc2626; margin-top: 0.125rem; flex-shrink: 0;"></i>
          <span>${errors.join(', ')}</span>
        `;
        
        formGroup.appendChild(errorDiv);
      }
    }
  });
  </script>
  
  <style>
  @keyframes slideDown {
    0% { 
      opacity: 0; 
      transform: translateY(-10px); 
      max-height: 0;
    }
    100% { 
      opacity: 1; 
      transform: translateY(0); 
      max-height: 100px;
    }
  }
  </style>
{% endif %}
