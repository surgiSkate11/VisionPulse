{% extends 'base.html' %}
{% load static %}

{% block title %}{{ exercise.title }} | VisionPulse{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto space-y-6">
    <div class="bg-white/90 backdrop-blur-xl rounded-xl shadow-sm border border-primary-health/10 overflow-hidden">
        <div class="p-6">
            <h1 class="text-2xl font-bold mb-2">{{ exercise.title }}</h1>
            <div class="flex items-center gap-4 text-sm text-gray-600 mb-6">
                <span><i class="far fa-clock mr-1"></i> {{ exercise.duration_minutes }} minutos</span>
                <span><i class="far fa-bookmark mr-1"></i> {{ exercise.type }}</span>
            </div>
            
            {% if exercise.video_link %}
            <div class="aspect-video rounded-lg overflow-hidden mb-6">
                <iframe 
                    src="https://www.youtube.com/embed/{{ exercise.video_link|slice:'32:' }}" 
                    class="w-full h-full"
                    frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen>
                </iframe>
            </div>
            {% endif %}

            <div class="prose max-w-none">
                <h2 class="text-xl font-semibold mb-4">Instrucciones</h2>
                {{ exercise.instruction_steps|linebreaks }}
            </div>
        </div>

        <div class="border-t border-gray-100 p-6 bg-gray-50/50">
            <form method="post" action="{% url 'exercises:exercise_detail' exercise.pk %}" class="space-y-4">
                {% csrf_token %}
                <div class="flex items-center gap-4">
                    <button type="submit" name="completed" value="true" class="flex-1 py-3 bg-primary-health text-white rounded-lg hover:bg-primary-health/90">
                        <i class="fas fa-check mr-2"></i>
                        Completar Ejercicio
                    </button>
                    <a href="{% url 'exercises:exercise_list' %}" class="px-4 py-3 text-gray-600 hover:text-gray-800">
                        <i class="fas fa-times"></i>
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
